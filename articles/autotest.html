<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="autotest">
<title>How to use autotest • autotest</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to use autotest">
<meta property="og:description" content="autotest">
<meta property="og:image" content="https://docs.ropensci.org/autotest/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">autotest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.2.207</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="active nav-item">
  <a class="nav-link" href="../articles/autotest.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/autotest-control.html">Control of tests</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci-review-tools/autotest/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="autotest_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="autotest_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="autotest_files/datatables-binding-0.32/datatables.js"></script><link href="autotest_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="autotest_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="autotest_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="autotest_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="autotest_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>How to use autotest</h1>
                        <h4 data-toc-skip class="author">Mark Padgham</h4>
            
            <h4 data-toc-skip class="date">2024-03-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci-review-tools/autotest/blob/HEAD/vignettes/autotest.Rmd" class="external-link"><code>vignettes/autotest.Rmd</code></a></small>
      <div class="d-none name"><code>autotest.Rmd</code></div>
    </div>

    
    
<p>This vignette demonstrates the easiest way to use <code>autotest</code>, which is to apply it continuously through the entire process of package development. The best way to understand the process is to obtain a local copy of the vignette itself from <a href="https://github.com/ropensci-review-tools/autotest/blob/master/vignettes/autotest.Rmd" class="external-link">this link</a>, and step through the code. We begin by constructing a simple package in the local <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/tempfile.html" class="external-link"><code>tempdir()</code></a>.</p>
<details closed><summary><span title="Click to Expand"> Package Construction </span>
</summary><p>To create a package in one simple line, we use <a href="https://usethis.r-lib.org/reference/create_package.html" class="external-link"><code>usethis::create_package()</code></a>, and name our package <code>"demo"</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span> <span class="op">(</span><span class="op">)</span>, <span class="st">"demo"</span><span class="op">)</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/create_package.html" class="external-link">create_package</a></span> <span class="op">(</span><span class="va">path</span>, check_name <span class="op">=</span> <span class="cn">FALSE</span>, open <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Creating <span style="color: #0000BB;">'/tmp/RtmpcDam57/demo/'</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Setting active project to <span style="color: #0000BB;">'/tmp/RtmpcDam57/demo'</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Creating <span style="color: #0000BB;">'R/'</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Writing <span style="color: #0000BB;">'DESCRIPTION'</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">Package</span>: demo</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">Title</span>: What the Package Does (One Line, Title Case)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">Version</span>: 0.0.0.9000</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">Authors@R</span> (parsed):</span></span>
<span><span class="co">#&gt;     * First Last &lt;first.last@example.com&gt; [aut, cre] (YOUR-ORCID-ID)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">Description</span>: What the package does (one paragraph).</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">License</span>: `use_mit_license()`, `use_gpl3_license()` or friends to</span></span>
<span><span class="co">#&gt;     pick a license</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">Encoding</span>: UTF-8</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">Roxygen</span>: list(markdown = TRUE)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">RoxygenNote</span>: 7.3.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Writing <span style="color: #0000BB;">'NAMESPACE'</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Setting active project to <span style="color: #0000BB;">'&lt;no active project&gt;'</span></span></span></code></pre></div>
<p>The structure looks like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">/tmp/RtmpcDam57/demo</span></span></span>
<span><span class="co">#&gt; ├── DESCRIPTION</span></span>
<span><span class="co">#&gt; ├── NAMESPACE</span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">R</span></span></span></code></pre></div>
</details><p><br></p>
<p>Having constructed a minimal package structure, we can then insert some code in the <code>R/</code> directory, including initial <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> documentation lines, and use the <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygenise()</code> function</a> to create the corresponding <code>man</code> files.</p>
<p><code>autotest</code> works by parsing and running “example” code from function documentation, so our code needs to include at least one example line.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"#' my_function"</span>,</span>
<span>           <span class="st">"#'"</span>,</span>
<span>           <span class="st">"#' @param x An input"</span>,</span>
<span>           <span class="st">"#' @return Something else"</span>,</span>
<span>           <span class="st">"#' @examples"</span>,</span>
<span>           <span class="st">"#' y &lt;- my_function (x = 1)"</span>,</span>
<span>           <span class="st">"#' @export"</span>,</span>
<span>           <span class="st">"my_function &lt;- function (x) {"</span>,</span>
<span>           <span class="st">"  return (x + 1)"</span>,</span>
<span>           <span class="st">"}"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">NAMESPACE</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">my_function.Rd</span></span></span></code></pre></div>
<p>Our package now looks like this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">/tmp/RtmpcDam57/demo</span></span></span>
<span><span class="co">#&gt; ├── DESCRIPTION</span></span>
<span><span class="co">#&gt; ├── NAMESPACE</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">R</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #00BB00;">myfn.R</span></span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">man</span></span></span>
<span><span class="co">#&gt;     └── my_function.Rd</span></span></code></pre></div>
<p>We can already apply <code>autotest</code> to that package to see what happens, first ensuring that we’ve loaded the package ready to use.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span> <span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/autotest/">autotest</a></span><span class="op">)</span></span>
<span><span class="va">x0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">autotest</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 1]: my_function</span></span></span></code></pre>
<p>We use the <a href="https://rstudio.github.io/DT" class="external-link"><code>DT</code> package</a> to display the results here.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span> <span class="op">(</span><span class="va">x0</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>dom <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span><span class="op">)</span> <span class="co"># display table only</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-827dc19e0451785e1ad6" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-827dc19e0451785e1ad6">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9"],["dummy","dummy","dummy","dummy","dummy","dummy","dummy","dummy","dummy"],["int_range","int_as_numeric","single_par_as_length_2","return_successful","return_val_described","return_desc_includes_class","return_class_matches_desc","par_is_documented","par_matches_docs"],["my_function","my_function","my_function","my_function","my_function","my_function","my_function","my_function","my_function"],["x","x","x","(return object)","(return object)","(return object)","(return object)","x","x"],["single integer","single integer","single integer","(return object)","(return object)","(return object)","(return object)",null,null],["Ascertain permissible range","Integer value converted to numeric","Length 2 vector for length 1 parameter","Check that function successfully returns an object","Check that description has return value","Check whether description of return value specifies class","Compare class of return value with description","Check that parameter is documented","Check that documentation matches class of input parameter"],["Should either be unrestricted or correspond with documentation","(Should yield same result)","Should trigger message, warning, or error",null,null,null,null,null,null],[true,true,true,true,true,true,true,true,true],["6574effe27136528bcf88427f07ada0c","6574effe27136528bcf88427f07ada0c","6574effe27136528bcf88427f07ada0c","6574effe27136528bcf88427f07ada0c","6574effe27136528bcf88427f07ada0c","6574effe27136528bcf88427f07ada0c","6574effe27136528bcf88427f07ada0c","6574effe27136528bcf88427f07ada0c","6574effe27136528bcf88427f07ada0c"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>type<\/th>\n      <th>test_name<\/th>\n      <th>fn_name<\/th>\n      <th>parameter<\/th>\n      <th>parameter_type<\/th>\n      <th>operation<\/th>\n      <th>content<\/th>\n      <th>test<\/th>\n      <th>yaml_hash<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"type","targets":1},{"name":"test_name","targets":2},{"name":"fn_name","targets":3},{"name":"parameter","targets":4},{"name":"parameter_type","targets":5},{"name":"operation","targets":6},{"name":"content","targets":7},{"name":"test","targets":8},{"name":"yaml_hash","targets":9}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>The first thing to notice is the first column, which has <code>test_type = "dummy"</code> for all rows. The <a href="https://docs.ropensci.org/autotest/reference/autotest_package.html"><code>autotest_package()</code> function</a> has a parameter <code>test</code> with a default value of <code>FALSE</code>, so that the default call demonstrated above does not actually implement the tests, rather it returns an object listing all tests that would be performed with actually doing so. Applying the tests by setting <code>test = TRUE</code> gives the following result.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 1]: my_function</span></span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span> <span class="op">(</span><span class="va">x1</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>dom <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-239fb6d1a9b23a714e88" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-239fb6d1a9b23a714e88">{"x":{"filter":"none","vertical":false,"data":[["1","2"],["diagnostic","diagnostic"],["int_range","single_par_as_length_2"],["my_function","my_function"],["x","x"],["single integer","single integer"],["Ascertain permissible range","Length 2 vector for length 1 parameter"],["Parameter [x] permits unrestricted integer inputs,  yet does not document this; please add 'unrestricted' to parameter description.","Parameter [x] of function [my_function] is only used a single integer value, but responds to vectors of length &gt; 1"],[true,true],["6574effe27136528bcf88427f07ada0c","6574effe27136528bcf88427f07ada0c"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>type<\/th>\n      <th>test_name<\/th>\n      <th>fn_name<\/th>\n      <th>parameter<\/th>\n      <th>parameter_type<\/th>\n      <th>operation<\/th>\n      <th>content<\/th>\n      <th>test<\/th>\n      <th>yaml_hash<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"type","targets":1},{"name":"test_name","targets":2},{"name":"fn_name","targets":3},{"name":"parameter","targets":4},{"name":"parameter_type","targets":5},{"name":"operation","targets":6},{"name":"content","targets":7},{"name":"test","targets":8},{"name":"yaml_hash","targets":9}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Of the 9 tests which were performed, only 2 yielded unexpected behaviour. The first indicates that the parameter <code>x</code> has only been used as an integer, yet was not specified as such. The second states that the parameter <code>x</code> is “assumed to be a single numeric”. <code>autotest</code> does its best to figure out what types of inputs are expected for each parameter, and with the example only demonstrating <code>x = 1</code>, assumes that <code>x</code> is always expected to be a single value. We can resolve the first of these by replacing <code>x = 1</code> with <code>x = 1.</code> to clearly indicate that it is not an integer, and the second by asserting that <code>length(x) == 1</code>, as follows:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"#' my_function"</span>,</span>
<span>           <span class="st">"#'"</span>,</span>
<span>           <span class="st">"#' @param x An input"</span>,</span>
<span>           <span class="st">"#' @return Something else"</span>,</span>
<span>           <span class="st">"#' @examples"</span>,</span>
<span>           <span class="st">"#' y &lt;- my_function (x = 1.)"</span>,</span>
<span>           <span class="st">"#' @export"</span>,</span>
<span>           <span class="st">"my_function &lt;- function (x) {"</span>,</span>
<span>           <span class="st">"  if (length(x) &gt; 1) {"</span>,</span>
<span>           <span class="st">"    warning(\"only the first value of x will be used\")"</span>,</span>
<span>           <span class="st">"    x &lt;- x [1]"</span>,</span>
<span>           <span class="st">"  }"</span>,</span>
<span>           <span class="st">"  return (x + 1)"</span>,</span>
<span>           <span class="st">"}"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">my_function.Rd</span></span></span></code></pre></div>
<p>This is then sufficient to pass all <code>autotest</code> tests and so return <code>NULL</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 1]: my_function</span></span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<div class="section level2">
<h2 id="integer-input">Integer input<a class="anchor" aria-label="anchor" href="#integer-input"></a>
</h2>
<p>Note that <code>autotest</code> distinguishes integer and non-integer types by their <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/mode.html" class="external-link"><code>storage.mode</code></a> of <code>"integer"</code> and <code>"double"</code>, and not by their respective classes of <code>"integer"</code> and <code>"numeric"</code>, because <code>"numeric"</code> is ambiguous in R, and <code>is.numeric(1L)</code> is <code>TRUE</code>, even though <code>storage.mode(1L)</code> is <code>"integer"</code>, and not <code>"numeric"</code>. Replacing <code>x = 1</code> with <code>x = 1.</code> explicitly identifies that parameter as a <code>"double"</code> parameter, and allowed the preceding tests to pass. Note what happens if we instead specify that parameter as an integer (<code>x = 1L</code>).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">[</span><span class="fl">6</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span> <span class="op">(</span><span class="st">"1\\."</span>, <span class="st">"1L"</span>, <span class="va">code</span> <span class="op">[</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">my_function.Rd</span></span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 1]: my_function</span></span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span> <span class="op">(</span><span class="va">x2</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>dom <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-1dab499a8a7c0c28c07b" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1dab499a8a7c0c28c07b">{"x":{"filter":"none","vertical":false,"data":[["1"],["diagnostic"],["int_range"],["my_function"],["x"],["single integer"],["Ascertain permissible range"],["Parameter [x] permits unrestricted integer inputs,  yet does not document this; please add 'unrestricted' to parameter description."],[true],["05768bbf2ab0f7e61b0426172ded0648"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>type<\/th>\n      <th>test_name<\/th>\n      <th>fn_name<\/th>\n      <th>parameter<\/th>\n      <th>parameter_type<\/th>\n      <th>operation<\/th>\n      <th>content<\/th>\n      <th>test<\/th>\n      <th>yaml_hash<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"type","targets":1},{"name":"test_name","targets":2},{"name":"fn_name","targets":3},{"name":"parameter","targets":4},{"name":"parameter_type","targets":5},{"name":"operation","targets":6},{"name":"content","targets":7},{"name":"test","targets":8},{"name":"yaml_hash","targets":9}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>That then generates two additional messages, the second of which reflects an expectation that parameters assumed to be integer-valued should assert that, for example by converting with <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer()</a></code>. The following suffices to remove that message.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="va">code</span> <span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">]</span>,</span>
<span>           <span class="st">"  if (is.numeric (x))"</span>,</span>
<span>           <span class="st">"    x &lt;- as.integer (x)"</span>,</span>
<span>           <span class="va">code</span> <span class="op">[</span><span class="fl">13</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">code</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>The remaining message concerns integer ranges. For any parameters which <code>autotest</code> identifies as single integers, routines will try a full range of values between <code>+/- .Machine$integer.max</code>, to ensure that all values are appropriately handled. Many routines may sensibly allow unrestricted ranges, while many others may not implement explicit control over permissible ranges, yet may error on, for example, unexpectedly large positive or negative values. The content of the diagnostic message indicates one way to resolve this issue, which is simply by describing the input as <code>"unrestricted"</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span> <span class="op">(</span><span class="st">"An input"</span>, <span class="st">"An unrestricted input"</span>, <span class="va">code</span> <span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">my_function.Rd</span></span></span>
<span><span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 1]: my_function</span></span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>An alternative, and frequently better way, is to ensure and document specific control over permissible ranges, as in the following revision of our function.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"#' my_function"</span>,</span>
<span>           <span class="st">"#'"</span>,</span>
<span>           <span class="st">"#' @param x An input between 0 and 10"</span>,</span>
<span>           <span class="st">"#' @return Something else"</span>,</span>
<span>           <span class="st">"#' @examples"</span>,</span>
<span>           <span class="st">"#' y &lt;- my_function (x = 1L)"</span>,</span>
<span>           <span class="st">"#' @export"</span>,</span>
<span>           <span class="st">"my_function &lt;- function (x) {"</span>,</span>
<span>           <span class="st">"  if (length(x) &gt; 1) {"</span>,</span>
<span>           <span class="st">"    warning(\"only the first value of x will be used\")"</span>,</span>
<span>           <span class="st">"    x &lt;- x [1]"</span>,</span>
<span>           <span class="st">"  }"</span>,</span>
<span>           <span class="st">"  if (is.numeric (x))"</span>,</span>
<span>           <span class="st">"    x &lt;- as.integer (x)"</span>,</span>
<span>           <span class="st">"  if (x &lt; 0 | x &gt; 10) {"</span>,</span>
<span>           <span class="st">"    stop (\"x must be between 0 and 10\")"</span>,</span>
<span>           <span class="st">"  }"</span>,</span>
<span>           <span class="st">"  return (x + 1L)"</span>,</span>
<span>           <span class="st">"}"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">my_function.Rd</span></span></span>
<span><span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 1]: my_function</span></span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Respective limits of ranges may be specified with any of the following words:</p>
<ul>
<li>Lower limits: “more”, “greater”, “larger than”, “lower limit of”, “above”</li>
<li>Upper limits: “less”, “lower”, “smaller than”, “upper limit of”, “below”</li>
</ul>
</div>
<div class="section level2">
<h2 id="vector-input">Vector input<a class="anchor" aria-label="anchor" href="#vector-input"></a>
</h2>
<p>The initial test results above suggested that the input was <em>assumed</em> to be of length one. Let us now revert our function to its original format which accepted vectors of length &gt; 1, and include an example demonstrating such input.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"#' my_function"</span>,</span>
<span>           <span class="st">"#'"</span>,</span>
<span>           <span class="st">"#' @param x An input"</span>,</span>
<span>           <span class="st">"#' @return Something else"</span>,</span>
<span>           <span class="st">"#' @examples"</span>,</span>
<span>           <span class="st">"#' y &lt;- my_function (x = 1)"</span>,</span>
<span>           <span class="st">"#' y &lt;- my_function (x = 1:2)"</span>,</span>
<span>           <span class="st">"#' @export"</span>,</span>
<span>           <span class="st">"my_function &lt;- function (x) {"</span>,</span>
<span>           <span class="st">"  if (is.numeric (x)) {"</span>,</span>
<span>           <span class="st">"    x &lt;- as.integer (x)"</span>,</span>
<span>           <span class="st">"  }"</span>,</span>
<span>           <span class="st">"  return (x + 1L)"</span>,</span>
<span>           <span class="st">"}"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">my_function.Rd</span></span></span></code></pre></div>
<p>Note that the first example no longer has <code>x = 1L</code>. This is because vector inputs are identified as <code>integer</code> by examining all individual values, and presuming <code>integer</code> representations for any parameters for which all values are whole numbers, regardless of <code>storage.mode</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 1]: my_function</span></span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span> <span class="op">(</span><span class="va">x3</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>dom <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-e9fb8b1f12a6b8a1e75b" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e9fb8b1f12a6b8a1e75b">{"x":{"filter":"none","vertical":false,"data":[["1"],["diagnostic"],["vector_to_list_col"],["my_function"],["x"],["vector"],["Convert vector input to list-columns"],["Function [my_function] errors on list-columns when submitted as x Error message: non-numeric argument to binary operator"],[true],["3da765db452ecc0f8e3e0c0a40d91437"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>type<\/th>\n      <th>test_name<\/th>\n      <th>fn_name<\/th>\n      <th>parameter<\/th>\n      <th>parameter_type<\/th>\n      <th>operation<\/th>\n      <th>content<\/th>\n      <th>test<\/th>\n      <th>yaml_hash<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"type","targets":1},{"name":"test_name","targets":2},{"name":"fn_name","targets":3},{"name":"parameter","targets":4},{"name":"parameter_type","targets":5},{"name":"operation","targets":6},{"name":"content","targets":7},{"name":"test","targets":8},{"name":"yaml_hash","targets":9}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><div class="section level3">
<h3 id="list-column-conversion">List-column conversion<a class="anchor" aria-label="anchor" href="#list-column-conversion"></a>
</h3>
<p>The above result reflects one of the standard tests, which is to determine whether list-column formats are appropriately processed. List-columns commonly arise when using (either directly or indirectly), the <a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link"><code>tidyr::nest()</code> function</a>, or equivalently in base R with the <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/AsIs.html" class="external-link"><code>I</code> or <code>AsIs</code> function</a>. They look like this:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span> <span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, y <span class="op">=</span> <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="co"># base R</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span> <span class="op">(</span><span class="va">dat</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span> <span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   x         y               </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;I&lt;list&gt;&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">&lt;int [1]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> <span style="color: #949494;">&lt;int [1]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 1]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> <span style="color: #949494;">&lt;int [1]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 1]&gt;</span></span></span></code></pre></div>
<p>The use of packages like <a href="https://tidyr.tidyverse.org" class="external-link"><code>tidyr</code></a> and <a href="https://purrr.tidyverse.org" class="external-link"><code>purrr</code></a> quite often leads to <a href="https://tibble.tidyverse.org" class="external-link"><code>tibble</code></a>-class inputs which contain list-columns. Any functions which fail to identify and appropriately respond to such inputs may generate unexpected errors, and this <code>autotest</code> is intended to enforce appropriate handling of these kinds of inputs. The following lines demonstrate the kinds of results that can arise without such checks.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span> <span class="op">(</span><span class="va">m</span>, n <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span></span>
<span><span class="co">#&gt;               mpg cyl disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; Mazda RX4      21   6  160 110  3.9 2.620 16.46  0  1    4    4</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag  21   6  160 110  3.9 2.875 17.02  0  1    4    4</span></span>
<span><span class="va">m</span><span class="op">$</span><span class="va">mpg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span> <span class="op">(</span><span class="va">m</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span> <span class="op">(</span><span class="va">m</span>, n <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span> <span class="co"># looks exaxtly the same</span></span>
<span><span class="co">#&gt;               mpg cyl disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; Mazda RX4      21   6  160 110  3.9 2.620 16.46  0  1    4    4</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag  21   6  160 110  3.9 2.875 17.02  0  1    4    4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span> <span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in cor(m): 'x' must be numeric</span></span></code></pre></div>
<p>In contrast, many functions either assume inputs to be lists, and convert when not, or implicitly <code>unlist</code>. Either way, such functions may respond entirely consistently regardless of the presence of list-columns, like this:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">$</span><span class="va">mpg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span> <span class="op">(</span><span class="st">"a"</span>, <span class="va">m</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">m</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "character"</span></span></code></pre></div>
<p>The list-column <code>autotest</code> is intended to enforce consistent behaviour in response to list-column inputs. One way to identify list-column formats is to check the value of <code>class(unclass(.))</code> of each column. The <code>unclass</code> function is necessary to first remove any additional class attributes, such as <code>I</code> in <code>dat$x</code> above. A modified version of our function which identifies and responds to list-column inputs might look like this:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"#' my_function"</span>,</span>
<span>           <span class="st">"#'"</span>,</span>
<span>           <span class="st">"#' @param x An input"</span>,</span>
<span>           <span class="st">"#' @return Something else"</span>,</span>
<span>           <span class="st">"#' @examples"</span>,</span>
<span>           <span class="st">"#' y &lt;- my_function (x = 1)"</span>,</span>
<span>           <span class="st">"#' y &lt;- my_function (x = 1:2)"</span>,</span>
<span>           <span class="st">"#' @export"</span>,</span>
<span>           <span class="st">"my_function &lt;- function (x) {"</span>,</span>
<span>           <span class="st">"  if (methods::is (unclass (x), \"list\")) {"</span>,</span>
<span>           <span class="st">"    x &lt;- unlist (x)"</span>,</span>
<span>           <span class="st">"  }"</span>,</span>
<span>           <span class="st">"  if (is.numeric (x)) {"</span>,</span>
<span>           <span class="st">"    x &lt;- as.integer (x)"</span>,</span>
<span>           <span class="st">"  }"</span>,</span>
<span>           <span class="st">"  return (x + 1L)"</span>,</span>
<span>           <span class="st">"}"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span></code></pre></div>
<p>That change once again leads to clean <code>autotest</code> results:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 1]: my_function</span></span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Of course simply attempting to <code>unlist</code> a complex list-column may be dangerous, and it may be preferable to issue some kind of message or warning, or even either simply remove any list-columns entirely or generate an error. Replacing the above, potentially dangerous, line, <code>x &lt;- unlist (x)</code> with a simple <code>stop("list-columns are not allowed")</code> will also produce clean <code>autotest</code> results.</p>
</div>
</div>
<div class="section level2">
<h2 id="return-results-and-documentation">Return results and documentation<a class="anchor" aria-label="anchor" href="#return-results-and-documentation"></a>
</h2>
<p>Functions which return complicated results, such as objects with specific classes, need to document those class types, and <code>autotest</code> compares return objects with documentation to ensure that this is done. The following code constructs a new function to demonstrate some of the ways <code>autotest</code> inspects return objects, demonstrating a vector input (<code>length(x) &gt; 1</code>) in the example to avoid messages regarding length checks an integer ranges.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"#' my_function3"</span>,</span>
<span>           <span class="st">"#'"</span>,</span>
<span>           <span class="st">"#' @param x An input"</span>,</span>
<span>           <span class="st">"#' @examples"</span>,</span>
<span>           <span class="st">"#' y &lt;- my_function3 (x = 1:2)"</span>,</span>
<span>           <span class="st">"#' @export"</span>,</span>
<span>           <span class="st">"my_function3 &lt;- function (x) {"</span>,</span>
<span>           <span class="st">"  return (datasets::iris)"</span>,</span>
<span>           <span class="st">"}"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn3.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span> <span class="co"># need to update docs with seed param</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">NAMESPACE</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">my_function3.Rd</span></span></span>
<span><span class="va">x4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 2]: my_function</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [2 / 2]: my_function3</span></span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span> <span class="op">(</span><span class="va">x4</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>dom <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-701f5b34bc2c9f68783e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-701f5b34bc2c9f68783e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3"],["diagnostic","diagnostic","diagnostic"],["return_val_described","return_desc_includes_class","return_class_matches_desc"],["my_function3","my_function3","my_function3"],["(return object)","(return object)","(return object)"],["(return object)","(return object)","(return object)"],["Check that description has return value","Check whether description of return value specifies class","Compare class of return value with description"],["Function [my_function3] does not specify a return value.","Function [my_function3] does not describe return value","Function [my_function3] does not describe return value"],[true,true,true],["96682ef822090d1ba5bfefea4b1c3249","96682ef822090d1ba5bfefea4b1c3249","96682ef822090d1ba5bfefea4b1c3249"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>type<\/th>\n      <th>test_name<\/th>\n      <th>fn_name<\/th>\n      <th>parameter<\/th>\n      <th>parameter_type<\/th>\n      <th>operation<\/th>\n      <th>content<\/th>\n      <th>test<\/th>\n      <th>yaml_hash<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"type","targets":1},{"name":"test_name","targets":2},{"name":"fn_name","targets":3},{"name":"parameter","targets":4},{"name":"parameter_type","targets":5},{"name":"operation","targets":6},{"name":"content","targets":7},{"name":"test","targets":8},{"name":"yaml_hash","targets":9}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Several new diagnostic messages are then issued regarding the description of the returned value. Let’s insert a description to see the effect.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="va">code</span> <span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>           <span class="st">"#' @return The iris data set as dataframe"</span>,</span>
<span>           <span class="va">code</span> <span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">code</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn3.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span> <span class="co"># need to update docs with seed param</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">my_function3.Rd</span></span></span>
<span><span class="va">x5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 2]: my_function</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [2 / 2]: my_function3</span></span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span> <span class="op">(</span><span class="va">x5</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>dom <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-cee309b6532b58eb889e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-cee309b6532b58eb889e">{"x":{"filter":"none","vertical":false,"data":[["1","2"],["diagnostic","diagnostic"],["return_desc_includes_class","return_class_matches_desc"],["my_function3","my_function3"],["(return object)","(return object)"],["(return object)","(return object)"],["Check whether description of return value specifies class","Compare class of return value with description"],["Function [my_function3] returns a value of class [data.frame], which differs from the value provided in the description","Function returns an object of class [data.frame] yet documentation describes class of value as [dataframe]"],[true,true],["96682ef822090d1ba5bfefea4b1c3249","96682ef822090d1ba5bfefea4b1c3249"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>type<\/th>\n      <th>test_name<\/th>\n      <th>fn_name<\/th>\n      <th>parameter<\/th>\n      <th>parameter_type<\/th>\n      <th>operation<\/th>\n      <th>content<\/th>\n      <th>test<\/th>\n      <th>yaml_hash<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"type","targets":1},{"name":"test_name","targets":2},{"name":"fn_name","targets":3},{"name":"parameter","targets":4},{"name":"parameter_type","targets":5},{"name":"operation","targets":6},{"name":"content","targets":7},{"name":"test","targets":8},{"name":"yaml_hash","targets":9}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>That result still contains a couple of diagnostic messages, but it is now pretty clear what we need to do, which is to be precise with our specification of the class of return object. The following then suffices to once again generate clean <code>autotest</code> results.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"#' @return The iris data set as data.frame"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn3.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span> <span class="co"># need to update docs with seed param</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">my_function3.Rd</span></span></span>
<span><span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 2]: my_function</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [2 / 2]: my_function3</span></span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<div class="section level3">
<h3 id="documentation-of-input-parameters">Documentation of input parameters<a class="anchor" aria-label="anchor" href="#documentation-of-input-parameters"></a>
</h3>
<p>Similar checks are performed on the documentation of input parameters, as demonstrated by the following modified version of the preceding function.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"#' my_function3"</span>,</span>
<span>           <span class="st">"#'"</span>,</span>
<span>           <span class="st">"#' @param x An input"</span>,</span>
<span>           <span class="st">"#' @return The iris data set as data.frame"</span>,</span>
<span>           <span class="st">"#' @examples"</span>,</span>
<span>           <span class="st">"#' y &lt;- my_function3 (x = datasets::iris)"</span>,</span>
<span>           <span class="st">"#' @export"</span>,</span>
<span>           <span class="st">"my_function3 &lt;- function (x) {"</span>,</span>
<span>           <span class="st">"  return (x)"</span>,</span>
<span>           <span class="st">"}"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span> <span class="op">(</span><span class="va">code</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">path</span>, <span class="st">"R"</span>, <span class="st">"myfn3.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">path</span><span class="op">)</span> <span class="co"># need to update docs with seed param</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">demo</span></span></span>
<span><span class="co">#&gt; Writing <span style="color: #0000BB;">my_function3.Rd</span></span></span>
<span><span class="va">x6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autotest_package.html">autotest_package</a></span> <span class="op">(</span><span class="va">path</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">autotesting demo</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [1 / 2]: my_function</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔ [2 / 2]: my_function3</span></span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span> <span class="op">(</span><span class="va">x6</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>dom <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-e45ca0c6034556009d89" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e45ca0c6034556009d89">{"x":null,"evals":[],"jsHooks":[]}</script><p>This warning again indicates precisely how it can be rectified, for example by replacing the third line with</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"#' @param x An input which can be a data.frame"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="general-procedure">General Procedure<a class="anchor" aria-label="anchor" href="#general-procedure"></a>
</h2>
<p>The demonstrations above hopefully suffice to indicate the general procedure which <code>autotest</code> attempts to make as simple as possible. This procedure consists of the following single point:</p>
<ul>
<li>From the moment you develop your first function, and every single time you modify your code, do whatever steps are necessary to ensure <code><a href="../reference/autotest_package.html">autotest_package()</a></code> returns <code>NULL</code>.</li>
</ul>
<p>This vignette has only demonstrated a few of the tests included in the package, but as long as you use <code>autotest</code> throughout the entire process of package development, any additional diagnostic messages should include sufficient information for you to be able to restructure your code to avoid them.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
